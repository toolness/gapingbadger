<!DOCTYPE html>
<meta charset="utf-8">
<title>Gapingbadger Client</title>
<button id="login" style="display: none">Login</button>
<script src="js/require-config.js"></script>
<script src="js/require.min.js"></script>
<script>
var badger;

require([
  "jquery",
  "gapingbadger",
  "get-wiki-badges"
], function($, Gapingbadger, getWikiBadges) {
  getWikiBadges('/Webmakers/SampleBadges', function(badges) {
    console.log(badges);
  });
  badger = Gapingbadger("http://labs.toolness.com:3031");
  badger.checkLogin({
    success: function() {
      $("#login").hide();
      badger.fetch();
    },
    authenticate: function(next) {
      require(["https://login.persona.org/include.js"], function() {
        $("#login").show().click(function() {
          navigator.id.get(next);
        });
      });
    }
  });
  badger.on('fetch', function() {
    console.log('fetch');
  });
});
</script>
